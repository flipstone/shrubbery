<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Shrubbery.Classes</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">shrubbery-0.1.0.0</span><ul class="links" id="page-menu"><li><a href="src/Shrubbery.Classes.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Shrubbery.Classes</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module provides typeclasses for constructing and deconstructing
  types that have branches in them. This is to say, sum types or any type
  that can present a sum-type-like interface.</p><p>See <code><a href="Shrubbery.html#v:Union" title="Shrubbery">Union</a></code> for examples using the provided <code><a href="Shrubbery-Union.html#v:Union" title="Shrubbery.Union">Union</a></code>
  type. Intances of these classes can also be provided for regular Haskell
  sum types to allow them to be used with the programmable branching provided
  by <code><a href="Shrubbery.html#v:Branches" title="Shrubbery">Branches</a></code>, like so:</p><pre>   data MySum = AnInt Int | AString String

   type instance BranchTypes MySum = [Int, String]

   instance Dissection MySum where
     dissect branches sum =
       case sum of
         AnInt int -&gt; selectBranch branches int
         AString string -&gt; selectBranch branches string

   instance Unification MySum where
     unifyWithIndex idx =
       selectBranchAtIndex idx
         $ branchBuild
         $ branch AnInt
         $ branch AString
         $ branchEnd
 </pre></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">type family</span> <a href="#t:BranchTypes">BranchTypes</a> a :: [<a href="../base-4.14.1.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>]</li><li class="src short"><span class="keyword">class</span> <a href="#t:Dissection">Dissection</a> a <span class="keyword">where</span><ul class="subs"><li><a href="#v:dissect">dissect</a> :: <a href="Shrubbery-Branches.html#t:Branches" title="Shrubbery.Branches">Branches</a> (<a href="Shrubbery-Classes.html#t:BranchTypes" title="Shrubbery.Classes">BranchTypes</a> a) result -&gt; a -&gt; result</li></ul></li><li class="src short"><span class="keyword">class</span> <a href="#t:Unification">Unification</a> a <span class="keyword">where</span><ul class="subs"><li><a href="#v:unifyWithIndex">unifyWithIndex</a> :: <a href="Shrubbery-BranchIndex.html#t:BranchIndex" title="Shrubbery.BranchIndex">BranchIndex</a> t (<a href="Shrubbery-Classes.html#t:BranchTypes" title="Shrubbery.Classes">BranchTypes</a> a) -&gt; t -&gt; a</li></ul></li><li class="src short"><a href="#v:unify">unify</a> :: <span class="keyword">forall</span> t a branchIndex. (<a href="../base-4.14.1.0/GHC-TypeNats.html#t:KnownNat" title="GHC.TypeNats">KnownNat</a> branchIndex, branchIndex ~ <a href="Shrubbery-TypeList.html#t:FirstIndexOf" title="Shrubbery.TypeList">FirstIndexOf</a> t (<a href="Shrubbery-Classes.html#t:BranchTypes" title="Shrubbery.Classes">BranchTypes</a> a), <a href="Shrubbery-Classes.html#t:Unification" title="Shrubbery.Classes">Unification</a> a) =&gt; t -&gt; a</li><li class="src short"><span class="keyword">class</span> <a href="#t:ShowBranches">ShowBranches</a> types <span class="keyword">where</span><ul class="subs"><li><a href="#v:showsPrecBranches">showsPrecBranches</a> :: <a href="Shrubbery-Branches.html#t:BranchBuilder" title="Shrubbery.Branches">BranchBuilder</a> types (<a href="../base-4.14.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.14.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a>)</li></ul></li><li class="src short"><a href="#v:showsPrecViaDissect">showsPrecViaDissect</a> :: (<a href="Shrubbery-Classes.html#t:Dissection" title="Shrubbery.Classes">Dissection</a> a, <a href="Shrubbery-TypeList.html#t:KnownLength" title="Shrubbery.TypeList">KnownLength</a> (<a href="Shrubbery-Classes.html#t:BranchTypes" title="Shrubbery.Classes">BranchTypes</a> a), <a href="Shrubbery-Classes.html#t:ShowBranches" title="Shrubbery.Classes">ShowBranches</a> (<a href="Shrubbery-Classes.html#t:BranchTypes" title="Shrubbery.Classes">BranchTypes</a> a)) =&gt; <a href="../base-4.14.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; a -&gt; <a href="../base-4.14.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:BranchTypes" class="def">BranchTypes</a> a :: [<a href="../base-4.14.1.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>] <a href="src/Shrubbery.Classes.html#BranchTypes" class="link">Source</a> <a href="#t:BranchTypes" class="selflink">#</a></p><div class="doc"><p>This type family is used by both <code><a href="Shrubbery-Classes.html#t:Dissection" title="Shrubbery.Classes">Dissection</a></code> and <code><a href="Shrubbery-Classes.html#t:Unification" title="Shrubbery.Classes">Unification</a></code> to specify
  the types of the values available in the branching type. If you provided
  instances of <code><a href="Shrubbery-Classes.html#t:Dissection" title="Shrubbery.Classes">Dissection</a></code> or <code><a href="Shrubbery-Classes.html#t:Unification" title="Shrubbery.Classes">Unification</a></code>, you'll need to provide an
  instance of this type family as well.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:BranchTypes">Instances</h4><details id="i:BranchTypes" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:if:BranchTypes:BranchTypes:1"></span> <span class="keyword">type</span> <a href="Shrubbery-Classes.html#t:BranchTypes" title="Shrubbery.Classes">BranchTypes</a> (<a href="Shrubbery-Union.html#t:Union" title="Shrubbery.Union">Union</a> types)</span> <a href="src/Shrubbery.Union.html#line-91" class="link">Source</a> <a href="#t:BranchTypes" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:if:BranchTypes:BranchTypes:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Shrubbery-Union.html">Shrubbery.Union</a></p> <div class="src"><span class="keyword">type</span> <a href="Shrubbery-Classes.html#t:BranchTypes" title="Shrubbery.Classes">BranchTypes</a> (<a href="Shrubbery-Union.html#t:Union" title="Shrubbery.Union">Union</a> types) = types</div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a id="t:Dissection" class="def">Dissection</a> a <span class="keyword">where</span> <a href="src/Shrubbery.Classes.html#Dissection" class="link">Source</a> <a href="#t:Dissection" class="selflink">#</a></p><div class="doc"><p>A <code><a href="Shrubbery-Classes.html#t:Dissection" title="Shrubbery.Classes">Dissection</a></code> provides a way to &quot;dissect&quot; a sum type via case analysis. The
  branches for handling the cases are given via a <code><a href="Shrubbery-Branches.html#t:Branches" title="Shrubbery.Branches">Branches</a></code> value.</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:dissect" class="def">dissect</a> :: <a href="Shrubbery-Branches.html#t:Branches" title="Shrubbery.Branches">Branches</a> (<a href="Shrubbery-Classes.html#t:BranchTypes" title="Shrubbery.Classes">BranchTypes</a> a) result -&gt; a -&gt; result <a href="src/Shrubbery.Classes.html#dissect" class="link">Source</a> <a href="#v:dissect" class="selflink">#</a></p><div class="doc"><p>Implementations of this must call the appropriate function in the given
    branches depending on the construction of the value <code>a</code>. If 'BranchTypes a'
    contains duplicate types, the implmentation should be careful to call the
    correct one in each case.</p></div></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Dissection">Instances</h4><details id="i:Dissection" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Dissection:Dissection:1"></span> <a href="Shrubbery-Classes.html#t:Dissection" title="Shrubbery.Classes">Dissection</a> (<a href="Shrubbery-Union.html#t:Union" title="Shrubbery.Union">Union</a> types)</span> <a href="src/Shrubbery.Union.html#line-93" class="link">Source</a> <a href="#t:Dissection" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Dissection:Dissection:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Shrubbery-Union.html">Shrubbery.Union</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:dissect">dissect</a> :: <a href="Shrubbery-Branches.html#t:Branches" title="Shrubbery.Branches">Branches</a> (<a href="Shrubbery-Classes.html#t:BranchTypes" title="Shrubbery.Classes">BranchTypes</a> (<a href="Shrubbery-Union.html#t:Union" title="Shrubbery.Union">Union</a> types)) result -&gt; <a href="Shrubbery-Union.html#t:Union" title="Shrubbery.Union">Union</a> types -&gt; result <a href="src/Shrubbery.Classes.html#dissect" class="link">Source</a> <a href="#v:dissect" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a id="t:Unification" class="def">Unification</a> a <span class="keyword">where</span> <a href="src/Shrubbery.Classes.html#Unification" class="link">Source</a> <a href="#t:Unification" class="selflink">#</a></p><div class="doc"><p>A <code><a href="Shrubbery-Classes.html#t:Unification" title="Shrubbery.Classes">Unification</a></code> provides a means to construct a sum type by embedding the
  members of the sum.</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:unifyWithIndex" class="def">unifyWithIndex</a> :: <a href="Shrubbery-BranchIndex.html#t:BranchIndex" title="Shrubbery.BranchIndex">BranchIndex</a> t (<a href="Shrubbery-Classes.html#t:BranchTypes" title="Shrubbery.Classes">BranchTypes</a> a) -&gt; t -&gt; a <a href="src/Shrubbery.Classes.html#unifyWithIndex" class="link">Source</a> <a href="#v:unifyWithIndex" class="selflink">#</a></p><div class="doc"><p>Embeds a member of the sum in the sum by specifying its index. This
    index-based interface is required by implementors to ensure there is not
    ambiguity when 'BranchTypes a' contains duplicates.</p></div></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Unification">Instances</h4><details id="i:Unification" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:Unification:Unification:1"></span> <a href="Shrubbery-Classes.html#t:Unification" title="Shrubbery.Classes">Unification</a> (<a href="Shrubbery-Union.html#t:Union" title="Shrubbery.Union">Union</a> types)</span> <a href="src/Shrubbery.Union.html#line-96" class="link">Source</a> <a href="#t:Unification" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:Unification:Unification:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Shrubbery-Union.html">Shrubbery.Union</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:unifyWithIndex">unifyWithIndex</a> :: <a href="Shrubbery-BranchIndex.html#t:BranchIndex" title="Shrubbery.BranchIndex">BranchIndex</a> t (<a href="Shrubbery-Classes.html#t:BranchTypes" title="Shrubbery.Classes">BranchTypes</a> (<a href="Shrubbery-Union.html#t:Union" title="Shrubbery.Union">Union</a> types)) -&gt; t -&gt; <a href="Shrubbery-Union.html#t:Union" title="Shrubbery.Union">Union</a> types <a href="src/Shrubbery.Classes.html#unifyWithIndex" class="link">Source</a> <a href="#v:unifyWithIndex" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:unify" class="def">unify</a> :: <span class="keyword">forall</span> t a branchIndex. (<a href="../base-4.14.1.0/GHC-TypeNats.html#t:KnownNat" title="GHC.TypeNats">KnownNat</a> branchIndex, branchIndex ~ <a href="Shrubbery-TypeList.html#t:FirstIndexOf" title="Shrubbery.TypeList">FirstIndexOf</a> t (<a href="Shrubbery-Classes.html#t:BranchTypes" title="Shrubbery.Classes">BranchTypes</a> a), <a href="Shrubbery-Classes.html#t:Unification" title="Shrubbery.Classes">Unification</a> a) =&gt; t -&gt; a <a href="src/Shrubbery.Classes.html#unify" class="link">Source</a> <a href="#v:unify" class="selflink">#</a></p><div class="doc"><p>Constructs a sum type by embedding a member type within it.</p><p>This function always embeds the member based on the first time it is found
  in 'BranchTypes a'. If there are duplicate types in 'BranchTypes a', you
  should use <code><a href="Shrubbery-Classes.html#v:unifyWithIndex" title="Shrubbery.Classes">unifyWithIndex</a></code> to disambiguate them.</p></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a id="t:ShowBranches" class="def">ShowBranches</a> types <span class="keyword">where</span> <a href="src/Shrubbery.Classes.html#ShowBranches" class="link">Source</a> <a href="#t:ShowBranches" class="selflink">#</a></p><div class="doc"><p><code><a href="Shrubbery-Classes.html#t:ShowBranches" title="Shrubbery.Classes">ShowBranches</a></code> is provided as a convenience for implementing <code><a href="../base-4.14.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a></code> on
  sum types via <code><a href="Shrubbery-Classes.html#t:Dissection" title="Shrubbery.Classes">Dissection</a></code></p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:showsPrecBranches" class="def">showsPrecBranches</a> :: <a href="Shrubbery-Branches.html#t:BranchBuilder" title="Shrubbery.Branches">BranchBuilder</a> types (<a href="../base-4.14.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.14.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a>) <a href="src/Shrubbery.Classes.html#showsPrecBranches" class="link">Source</a> <a href="#v:showsPrecBranches" class="selflink">#</a></p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:ShowBranches">Instances</h4><details id="i:ShowBranches" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:ShowBranches:ShowBranches:1"></span> <a href="Shrubbery-Classes.html#t:ShowBranches" title="Shrubbery.Classes">ShowBranches</a> ('[] :: [<a href="../base-4.14.1.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>])</span> <a href="src/Shrubbery.Classes.html#line-110" class="link">Source</a> <a href="#t:ShowBranches" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:ShowBranches:ShowBranches:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Shrubbery-Classes.html">Shrubbery.Classes</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrecBranches">showsPrecBranches</a> :: <a href="Shrubbery-Branches.html#t:BranchBuilder" title="Shrubbery.Branches">BranchBuilder</a> '[] (<a href="../base-4.14.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.14.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a>) <a href="src/Shrubbery.Classes.html#showsPrecBranches" class="link">Source</a> <a href="#v:showsPrecBranches" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:ShowBranches:ShowBranches:2"></span> (<a href="../base-4.14.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> a, <a href="Shrubbery-Classes.html#t:ShowBranches" title="Shrubbery.Classes">ShowBranches</a> rest) =&gt; <a href="Shrubbery-Classes.html#t:ShowBranches" title="Shrubbery.Classes">ShowBranches</a> (a ': rest)</span> <a href="src/Shrubbery.Classes.html#line-114" class="link">Source</a> <a href="#t:ShowBranches" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:ShowBranches:ShowBranches:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Shrubbery-Classes.html">Shrubbery.Classes</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrecBranches">showsPrecBranches</a> :: <a href="Shrubbery-Branches.html#t:BranchBuilder" title="Shrubbery.Branches">BranchBuilder</a> (a ': rest) (<a href="../base-4.14.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.14.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a>) <a href="src/Shrubbery.Classes.html#showsPrecBranches" class="link">Source</a> <a href="#v:showsPrecBranches" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:showsPrecViaDissect" class="def">showsPrecViaDissect</a> :: (<a href="Shrubbery-Classes.html#t:Dissection" title="Shrubbery.Classes">Dissection</a> a, <a href="Shrubbery-TypeList.html#t:KnownLength" title="Shrubbery.TypeList">KnownLength</a> (<a href="Shrubbery-Classes.html#t:BranchTypes" title="Shrubbery.Classes">BranchTypes</a> a), <a href="Shrubbery-Classes.html#t:ShowBranches" title="Shrubbery.Classes">ShowBranches</a> (<a href="Shrubbery-Classes.html#t:BranchTypes" title="Shrubbery.Classes">BranchTypes</a> a)) =&gt; <a href="../base-4.14.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; a -&gt; <a href="../base-4.14.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="src/Shrubbery.Classes.html#showsPrecViaDissect" class="link">Source</a> <a href="#v:showsPrecViaDissect" class="selflink">#</a></p><div class="doc"><p><code><a href="Shrubbery-Classes.html#v:showsPrecViaDissect" title="Shrubbery.Classes">showsPrecViaDissect</a></code> can be used as the implementation of
  <code><a href="../base-4.14.1.0/Text-Show.html#v:showsPrec" title="Text.Show">showsPrec</a></code> for types that implement <code><a href="Shrubbery-Classes.html#t:Dissection" title="Shrubbery.Classes">Dissection</a></code> when all the member
  types implement <code><a href="../base-4.14.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a></code></p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.0</p></div></body></html>