<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Shrubbery.Branches</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">shrubbery-0.1.0.0</span><ul class="links" id="page-menu"><li><a href="src/Shrubbery.Branches.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Shrubbery.Branches</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This modules provides functionality similar to Haskell's built-in case
  statements, but which can be built at run time without losing exhaustivity
  checking. The technique to satisfy both these desires is to use a type-level
  list of types to represent the type of value that is available in a given
  branch, which is analogous to the values you would extract while pattern
  matching a Haskell type with multiple constructors in a case statement.</p><p>This is best understood through an example:</p><pre>   intStringOrBoolBranches :: Branches [Int, String, Bool] String
   intStringOrBoolBranches =
     branchBuild
     $ branch doSomethingWithInt
     $ branch doSomethingWithString
     $ branch doSomethingWithBool
     $ branchEnd
 </pre><p>Or, if you prefer to use <code>TypeApplications</code> to make this more explicit:</p><pre>   intStringOrBoolBranches :: Branches [Int, String, Bool] String
   intStringOrBoolBranches =
     branchBuild
     $ branch <code>Int    doSomethingWithInt
     $ branch </code>String doSomethingWithString
     $ branch @Bool   doSomethingWithBool
     $ branchEnd
 </pre><p>You can then use the branch values above almost like functions to perform
  case-like analysis based on the type of value, using <code><a href="Shrubbery-Branches.html#v:selectBranch" title="Shrubbery.Branches">selectBranch</a></code></p><pre>   &gt;&gt;&gt; selectBranch intStringOrBoolBranches (1 :: Int)
   doSomethingWithInt 1

   &gt;&gt;&gt; selectBranch intStringOrBoolBranches (&quot;Foo&quot;)
   doSomethingWithString &quot;Foo&quot;

   &gt;&gt;&gt; selectBranch intStringOrBoolBranches True
   doSomethingWithBool True
 </pre></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:branchBuild">branchBuild</a> :: <a href="Shrubbery-TypeList.html#t:KnownLength" title="Shrubbery.TypeList">KnownLength</a> paramTypes =&gt; <a href="Shrubbery-Branches.html#t:BranchBuilder" title="Shrubbery.Branches">BranchBuilder</a> paramTypes result -&gt; <a href="Shrubbery-Branches.html#t:Branches" title="Shrubbery.Branches">Branches</a> paramTypes result</li><li class="src short"><a href="#v:branch">branch</a> :: (param -&gt; result) -&gt; <a href="Shrubbery-Branches.html#t:BranchBuilder" title="Shrubbery.Branches">BranchBuilder</a> paramTypes result -&gt; <a href="Shrubbery-Branches.html#t:BranchBuilder" title="Shrubbery.Branches">BranchBuilder</a> (param ': paramTypes) result</li><li class="src short"><a href="#v:branchEnd">branchEnd</a> :: <a href="Shrubbery-Branches.html#t:BranchBuilder" title="Shrubbery.Branches">BranchBuilder</a> '[] result</li><li class="src short"><span class="keyword">data</span> <a href="#t:Branches">Branches</a> (paramTypes :: [<a href="../base-4.14.1.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>]) result</li><li class="src short"><span class="keyword">data</span> <a href="#t:BranchBuilder">BranchBuilder</a> (paramTypes :: [<a href="../base-4.14.1.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>]) result</li><li class="src short"><a href="#v:selectBranch">selectBranch</a> :: (<a href="../base-4.14.1.0/GHC-TypeNats.html#t:KnownNat" title="GHC.TypeNats">KnownNat</a> branchIndex, branchIndex ~ <a href="Shrubbery-TypeList.html#t:FirstIndexOf" title="Shrubbery.TypeList">FirstIndexOf</a> param paramTypes) =&gt; <a href="Shrubbery-Branches.html#t:Branches" title="Shrubbery.Branches">Branches</a> paramTypes result -&gt; param -&gt; result</li><li class="src short"><a href="#v:selectBranchAtIndex">selectBranchAtIndex</a> :: <a href="Shrubbery-BranchIndex.html#t:BranchIndex" title="Shrubbery.BranchIndex">BranchIndex</a> param paramTypes -&gt; <a href="Shrubbery-Branches.html#t:Branches" title="Shrubbery.Branches">Branches</a> paramTypes result -&gt; param -&gt; result</li><li class="src short"><a href="#v:selectBranchAtProxy">selectBranchAtProxy</a> :: (<a href="../base-4.14.1.0/GHC-TypeNats.html#t:KnownNat" title="GHC.TypeNats">KnownNat</a> branchIndex, param ~ <a href="Shrubbery-TypeList.html#t:TypeAtIndex" title="Shrubbery.TypeList">TypeAtIndex</a> branchIndex paramTypes) =&gt; proxy branchIndex -&gt; <a href="Shrubbery-Branches.html#t:Branches" title="Shrubbery.Branches">Branches</a> paramTypes result -&gt; param -&gt; result</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:branchBuild" class="def">branchBuild</a> :: <a href="Shrubbery-TypeList.html#t:KnownLength" title="Shrubbery.TypeList">KnownLength</a> paramTypes =&gt; <a href="Shrubbery-Branches.html#t:BranchBuilder" title="Shrubbery.Branches">BranchBuilder</a> paramTypes result -&gt; <a href="Shrubbery-Branches.html#t:Branches" title="Shrubbery.Branches">Branches</a> paramTypes result <a href="src/Shrubbery.Branches.html#branchBuild" class="link">Source</a> <a href="#v:branchBuild" class="selflink">#</a></p><div class="doc"><p>From a lexical code perspective you can think of this as &quot;beginning&quot; a branching
  section (hence the name). It actually finalizes the building of branches to
  optimized the lookup so that branch dispatching can be done in O(1) time.</p></div></div><div class="top"><p class="src"><a id="v:branch" class="def">branch</a> :: (param -&gt; result) -&gt; <a href="Shrubbery-Branches.html#t:BranchBuilder" title="Shrubbery.Branches">BranchBuilder</a> paramTypes result -&gt; <a href="Shrubbery-Branches.html#t:BranchBuilder" title="Shrubbery.Branches">BranchBuilder</a> (param ': paramTypes) result <a href="src/Shrubbery.Branches.html#branch" class="link">Source</a> <a href="#v:branch" class="selflink">#</a></p><div class="doc"><p>Specifies how to handle a given position in a list of types. The function
  parameter type is added to the front of the list of types for the branches
  that are being constructed. This means that the branches must be specified
  (from &quot;top&quot; to &quot;bottom&quot;) in the same order they are given in the list or else
  you get a compilation error.</p></div></div><div class="top"><p class="src"><a id="v:branchEnd" class="def">branchEnd</a> :: <a href="Shrubbery-Branches.html#t:BranchBuilder" title="Shrubbery.Branches">BranchBuilder</a> '[] result <a href="src/Shrubbery.Branches.html#branchEnd" class="link">Source</a> <a href="#v:branchEnd" class="selflink">#</a></p><div class="doc"><p>Indicates that there are no more branches to specify. This must appear as
  the final entry in a sequence of <code><a href="Shrubbery-Branches.html#v:branch" title="Shrubbery.Branches">branch</a></code> calls to handle the base case of
  an empty type list.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Branches" class="def">Branches</a> (paramTypes :: [<a href="../base-4.14.1.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>]) result <a href="src/Shrubbery.Branches.html#Branches" class="link">Source</a> <a href="#t:Branches" class="selflink">#</a></p><div class="doc"><p><code><a href="Shrubbery-Branches.html#t:Branches" title="Shrubbery.Branches">Branches</a></code> contains an array of functions that have different parameter
  types, but produce the same result. The <code>paramTypes</code> list of types indicates
  the types of the input parameters, in order.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:BranchBuilder" class="def">BranchBuilder</a> (paramTypes :: [<a href="../base-4.14.1.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a>]) result <a href="src/Shrubbery.Branches.html#BranchBuilder" class="link">Source</a> <a href="#t:BranchBuilder" class="selflink">#</a></p><div class="doc"><p><code><a href="Shrubbery-Branches.html#t:BranchBuilder" title="Shrubbery.Branches">BranchBuilder</a></code> is an efficient interface for building a <code><a href="Shrubbery-Branches.html#t:Branches" title="Shrubbery.Branches">Branches</a></code>.
  Use <code><a href="Shrubbery-Branches.html#v:branchBuild" title="Shrubbery.Branches">branchBuild</a></code> to &quot;execute&quot; the <code><a href="Shrubbery-Branches.html#t:BranchBuilder" title="Shrubbery.Branches">BranchBuilder</a></code> to make <code><a href="Shrubbery-Branches.html#t:Branches" title="Shrubbery.Branches">Branches</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:selectBranch" class="def">selectBranch</a> :: (<a href="../base-4.14.1.0/GHC-TypeNats.html#t:KnownNat" title="GHC.TypeNats">KnownNat</a> branchIndex, branchIndex ~ <a href="Shrubbery-TypeList.html#t:FirstIndexOf" title="Shrubbery.TypeList">FirstIndexOf</a> param paramTypes) =&gt; <a href="Shrubbery-Branches.html#t:Branches" title="Shrubbery.Branches">Branches</a> paramTypes result -&gt; param -&gt; result <a href="src/Shrubbery.Branches.html#selectBranch" class="link">Source</a> <a href="#v:selectBranch" class="selflink">#</a></p><div class="doc"><p>Selects a function out of some <code><a href="Shrubbery-Branches.html#t:Branches" title="Shrubbery.Branches">Branches</a></code> to use for a particular value. This
  function picks the first function whose parameter type matches, which is
  usually sufficient as <code>paramTypes</code> will usually contain each type only once.</p><p>If you need to select a particular index, use <code><a href="Shrubbery-Branches.html#v:selectBranchAtProxy" title="Shrubbery.Branches">selectBranchAtProxy</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:selectBranchAtIndex" class="def">selectBranchAtIndex</a> :: <a href="Shrubbery-BranchIndex.html#t:BranchIndex" title="Shrubbery.BranchIndex">BranchIndex</a> param paramTypes -&gt; <a href="Shrubbery-Branches.html#t:Branches" title="Shrubbery.Branches">Branches</a> paramTypes result -&gt; param -&gt; result <a href="src/Shrubbery.Branches.html#selectBranchAtIndex" class="link">Source</a> <a href="#v:selectBranchAtIndex" class="selflink">#</a></p><div class="doc"><p>Selects the function out of <code><a href="Shrubbery-Branches.html#t:Branches" title="Shrubbery.Branches">Branches</a></code> at the given index so that it can be
  used with the correct input parameter type.</p></div></div><div class="top"><p class="src"><a id="v:selectBranchAtProxy" class="def">selectBranchAtProxy</a> :: (<a href="../base-4.14.1.0/GHC-TypeNats.html#t:KnownNat" title="GHC.TypeNats">KnownNat</a> branchIndex, param ~ <a href="Shrubbery-TypeList.html#t:TypeAtIndex" title="Shrubbery.TypeList">TypeAtIndex</a> branchIndex paramTypes) =&gt; proxy branchIndex -&gt; <a href="Shrubbery-Branches.html#t:Branches" title="Shrubbery.Branches">Branches</a> paramTypes result -&gt; param -&gt; result <a href="src/Shrubbery.Branches.html#selectBranchAtProxy" class="link">Source</a> <a href="#v:selectBranchAtProxy" class="selflink">#</a></p><div class="doc"><p>Selects the function out of <code><a href="Shrubbery-Branches.html#t:Branches" title="Shrubbery.Branches">Branches</a></code> at the given index so that it can be
  used with the correct input parameter type. The index is specified via a proxy
  value, like such:</p><pre>   selectBranchAtProxy (Proxy :: 1) branches
 </pre><p>Or, with type applications:</p><pre>   selectBranchAtProxy @1 Proxy branches
 </pre></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.0</p></div></body></html>