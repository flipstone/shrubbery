services:
  dev:
    image: ghcr.io/flipstone/haskell-tools:debian-ghc-9.10.3-b5fe85f
    volumes:
      - .:${PROJECT_DIR}
      - flipstone_stack_root:/stack-root
    environment:
      STACK_ROOT: /stack-root
      IN_DEV_CONTAINER: 'true'
      # Pass through the CI variable from GitHub (or set it to `true` locally
      # for debugging CI builds)
      CI:
    working_dir: ${PROJECT_DIR}
    tty: true

volumes:
  flipstone_stack_root:
    external: true
